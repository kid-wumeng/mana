module.exports = class Matrix extends Array

   constructor: ->
      super(4)
      @[0] = [1, 0, 0, 0]
      @[1] = [0, 1, 0, 0]
      @[2] = [0, 0, 1, 0]
      @[3] = [0, 0, 0, 1]

   concat: (m) ->
      A11=@[0][0]; A12=@[0][1]; A13=@[0][2]; A14=@[0][3]; A21=@[1][0]; A22=@[1][1]; A23=@[1][2]; A24=@[1][3]; A31=@[2][0]; A32=@[2][1]; A33=@[2][2]; A34=@[2][3]
      B11=m[0][0]; B12=m[0][1]; B13=m[0][2]; B14=m[0][3]; B21=m[1][0]; B22=m[1][1]; B23=m[1][2]; B24=m[1][3]; B31=m[2][0]; B32=m[2][1]; B33=m[2][2]; B34=m[2][3]; B41=m[3][0]; B42=m[3][1]; B43=m[3][2]; B44=m[3][3];
      C = new Matrix()
      C[0][0]=A11*B11+A12*B21+A13*B31+A14*B41; C[0][1]=A11*B12+A12*B22+A13*B32+A14*B42; C[0][2]=A11*B13+A12*B23+A13*B33+A14*B43; C[0][3]=A11*B14+A12*B24+A13*B34+A14*B44
      C[1][0]=A21*B11+A22*B21+A23*B31+A24*B41; C[1][1]=A21*B12+A22*B22+A23*B32+A24*B42; C[1][2]=A21*B13+A22*B23+A23*B33+A24*B43; C[1][3]=A21*B14+A22*B24+A23*B34+A24*B44
      C[2][0]=A31*B11+A32*B21+A33*B31+A34*B41; C[2][1]=A31*B12+A32*B22+A33*B32+A34*B42; C[2][2]=A31*B13+A32*B23+A33*B33+A34*B43; C[2][3]=A31*B14+A32*B24+A33*B34+A34*B44
      C